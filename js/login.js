$(function(){var e={url:{goLogin:"login.ca?type=login"},init:function(){var e=this;$("#loginBtn").on("click",function(){e.submit()})},submit:function(){var e=$("#username").val(),t=$("#department").val(),n=$("#mobile").val(),r=$("#password").val();if(e==""||e==null)return alert("用户名不能为空"),!1;if(n=="")return alert("手机号不能为空"),!1;if(r=="")return alert("密码不能为空"),!1;if(t=="")return alert("请选择部门"),!1;var i=!!n.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9])[0-9]{8}$/);if(i==0){alert("请输入正确的手机号!");return}this.doLogin({mobile:n,username:e,department:t,password:r,usergent:encodeURIComponent(navigator.userAgent),sw:window.screen.width,sh:window.screen.height})},doLogin:function(e){var t=this;g.loadingMask.open(),$.ajax({type:"GET",url:g.url.host+t.url.goLogin+"&"+g.stringfObj(e),cache:!1,success:function(e){e=JSON.parse(e),e.result==1?(g.setUserInfo(e.data),document.location.href="details.html"):e.result==2?alert("抽奖时间为2016年2月2日20:00-23:00，请按时参加。"):alert("登录失败，请检查您输入的信息"),g.loadingMask.close()},error:function(e){e.statusText=="timeout"?(alert("服务器请求超时无响应，请刷新页面"),document.location.reload()):alert("登录失败，请稍后重试"),g.loadingMask.close()}})}};window.login=e,e.init()});